!function(e){window.creditReport=e.fn.creditReport={formatMoney:function(e,r){r=r>0&&20>=r?r:2,e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(r)+"";var a=e.split(".")[0].split("").reverse(),d=e.split(".")[1];for(t="",i=0;i<a.length;i++)t+=a[i]+((i+1)%3==0&&i+1!=a.length?",":"");return t.split("").reverse().join("")+"."+d},findEtrRelationship:function(){e.ajax({url:basePath+"etrCreditReport/findEtrRelationship?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){etrRelationList=t.etrRelationList;var r="";if(0==etrRelationList.length)r+="<tr><td colspan='3'>无</td> </tr>";else for(var a in etrRelationList)r+="<tr><td>"+etrRelationList[a].relationType+"</td><td>"+etrRelationList[a].relationEnterpriseName+"</td><td>"+etrRelationList[a].city+"</td></tr>";e("#etrRelationshipTb").html(r)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findEtrCapital:function(){e.ajax({url:basePath+"etrCreditReport/findEtrCapital?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){etrCapitalList=t.etrCapitalList;var r="";if(0==etrCapitalList.length)r+="<tr><td colspan='8'>无</td> </tr>";else for(var a in etrCapitalList){var i;if(null!=etrCapitalList[a].createTime){var d=new Date(etrCapitalList[a].createTime);i=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}else i="--";amount=null!=etrCapitalList[a].amount?creditReport.formatMoney(etrCapitalList[a].amount,2):"--",r+="<tr><td>"+(null!=etrCapitalList[a].investor?etrCapitalList[a].investor:"--")+"</td><td>"+(null!=etrCapitalList[a].taxNo?etrCapitalList[a].taxNo:"--")+"</td><td>"+(null!=etrCapitalList[a].investorType?etrCapitalList[a].investorType:"--")+"</td><td>"+(null!=etrCapitalList[a].zjlx?etrCapitalList[a].zjlx:"--")+"</td><td>"+(null!=etrCapitalList[a].zjhm?etrCapitalList[a].zjhm:"--")+"</td><td>"+(null!=etrCapitalList[a].currency?etrCapitalList[a].currency:"--")+"</td><td>"+amount+"</td><td>"+i+"</td></tr>"}e("#etrCaptialTb").html(r)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findEtrSaleBuy:function(){e.ajax({url:basePath+"etrCreditReport/findEtrSaleBuy?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){etrSaleList=t.etrSaleList,etrBuyList=t.etrBuyList;var r="",a="";for(var i in etrSaleList){var d;d=null!=etrSaleList[i].amount?creditReport.formatMoney(etrSaleList[i].amount,2):"--",r+="<td>"+etrSaleList[i].fpfs+"</td>",a+="<td>"+d+"</td>"}for(var s=etrSaleList.length;12>s;s++)r+="<td>--</td>",a+="<td>--</td>";e("#saleFpfs").after(r),e("#saleAmount").after(a);var n="",o="";for(var i in etrBuyList){var d;d=null!=etrBuyList[i].amount?creditReport.formatMoney(etrBuyList[i].amount,2):"--",n+="<td>"+etrBuyList[i].fpfs+"</td>",o+="<td>"+d+"</td>"}for(var s=etrBuyList.length;12>s;s++)n+="<td>--</td>",o+="<td>--</td>";e("#buyFpfs").after(n),e("#buyAmount").after(o)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findEtrSaleBuyTradingPartners:function(){e.ajax({url:basePath+"etrCreditReport/findEtrSaleBuyTradingPartners?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){etrSaleTradingPartnerList=t.etrSaleTradingPartnerList,etrBuyTradingPartnerList=t.etrBuyTradingPartnerList;var r="";for(var a in etrSaleTradingPartnerList){var i;i=null!=etrSaleTradingPartnerList[a].amount?creditReport.formatMoney(etrSaleTradingPartnerList[a].amount,2):"--",r+="<tr><td>"+etrSaleTradingPartnerList[a].enterpriseName+"</td><td>"+etrSaleTradingPartnerList[a].fpfs+"</td><td>"+i+"</td></tr>"}e("#etrSaleTradingPartnerTb").html(r);var d="";for(var a in etrBuyTradingPartnerList){var i;i=null!=etrBuyTradingPartnerList[a].amount?creditReport.formatMoney(etrBuyTradingPartnerList[a].amount,2):"--",d+="<tr><td>"+etrBuyTradingPartnerList[a].enterpriseName+"</td><td>"+etrBuyTradingPartnerList[a].fpfs+"</td><td>"+i+"</td></tr>"}e("#etrBuyTradingPartnerTb").html(d)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findDeepEtrBusCir:function(){e.ajax({url:basePath+"etrCreditReport/findDeepEtrBusCir?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){deepEtrBusCirBuyList=t.deepEtrBusCirBuyList,deepEtrBusCirSaleList=t.deepEtrBusCirSaleList,deepEtrBusCirFpjeList=t.deepEtrBusCirFpjeList,deepEtrBusCirBuyResult=t.deepEtrBusCirBuyResult,deepEtrBusCirSaleResult=t.deepEtrBusCirSaleResult,deepEtrBusCirFpjeResult=t.deepEtrBusCirFpjeResult;var r="",a="",i="",d=deepEtrBusCirBuyResult.thisYearAmount,s=deepEtrBusCirBuyResult.lastYearAmount;for(var n in deepEtrBusCirBuyList){var o;o=null!=deepEtrBusCirBuyList[n].amount?creditReport.formatMoney(deepEtrBusCirBuyList[n].amount,2):"--",r+="<td>"+o+"</td>",a+="<td>"+deepEtrBusCirBuyList[n].tb+"%</td>",i+="<td>"+deepEtrBusCirBuyList[n].hb+"%</td>"}for(var u=deepEtrBusCirBuyList.length;12>u;u++)r+="<td>--</td>",a+="<td>--</td>",i+="<td>--</td>";e("#deepEtrBusCirBuyAmount").after(r),e("#deepEtrBusCirBuyTb").after(a),e("#deepEtrBusCirBuyHb").after(i);var p=echarts.init(document.getElementById("deepEtrBusCirBuyChart")),l={title:{text:"企业经营情况分析",subtext:"本年度与上年度进项金额折线图"},tooltip:{trigger:"axis"},legend:{data:["本年度","上年度"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:["01","02","03","04","05","06","07","08","09","10","11","12"]}],yAxis:[{type:"value",axisLabel:{formatter:"{value}"}}],series:[{name:"本年度",type:"line",data:d,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"上年度",type:"line",data:s,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};p.setOption(l);var c="",y="",L="",m=deepEtrBusCirSaleResult.thisYearAmount,f=deepEtrBusCirSaleResult.lastYearAmount;for(var n in deepEtrBusCirSaleList){var o;o=null!=deepEtrBusCirSaleList[n].amount?creditReport.formatMoney(deepEtrBusCirSaleList[n].amount,2):"--",c+="<td>"+o+"</td>",y+="<td>"+deepEtrBusCirSaleList[n].tb+"%</td>",L+="<td>"+deepEtrBusCirSaleList[n].hb+"%</td>"}for(var u=deepEtrBusCirBuyList.length;12>u;u++)c+="<td>--</td>",y+="<td>--</td>",L+="<td>--</td>";e("#deepEtrBusCirSaleAmount").after(c),e("#deepEtrBusCirSaleTb").after(y),e("#deepEtrBusCirSaleHb").after(L);var E=echarts.init(document.getElementById("deepEtrBusCirSaleChart")),B={title:{text:"企业经营情况分析",subtext:"本年度与上年度销项金额折线图"},tooltip:{trigger:"axis"},legend:{data:["本年度","上年度"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:["01","02","03","04","05","06","07","08","09","10","11","12"]}],yAxis:[{type:"value",axisLabel:{formatter:"{value}"}}],series:[{name:"本年度",type:"line",data:m,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"上年度",type:"line",data:f,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};E.setOption(B)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findDeepEtrCustomerSupplier:function(){e.ajax({url:basePath+"etrCreditReport/findDeepEtrCustomerSupplier?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){deepEtrCustomerList=t.deepEtrCustomerList,deepEtrSupplierList=t.deepEtrSupplierList;for(var r="",a=0;5>a;a++)r+="<tr><td>"+(a+1)+"</td><td>"+deepEtrCustomerList[a]+"</td><td>"+deepEtrCustomerList[a+5]+"</td><td>"+deepEtrCustomerList[a+10]+"</td><td>"+deepEtrCustomerList[a+15]+"</td></tr>";e("#deepEtrCustomerTb").html(r);for(var i="",a=0;5>a;a++)i+="<tr><td>"+(a+1)+"</td><td>"+deepEtrSupplierList[a]+"</td><td>"+deepEtrSupplierList[a+5]+"</td><td>"+deepEtrSupplierList[a+10]+"</td><td>"+deepEtrSupplierList[a+15]+"</td></tr>";e("#deepEtrSupplierTb").html(i)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findDeepEtrSaleBuyProduct:function(){e.ajax({url:basePath+"etrCreditReport/findDeepEtrSaleBuyProduct?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){deepEtrSaleProductList=t.deepEtrSaleProductList,deepEtrBuyProductList=t.deepEtrBuyProductList;for(var r="",a=0;5>a;a++)r+="<tr><td>"+(a+1)+"</td><td>"+deepEtrBuyProductList[a]+"</td><td>"+deepEtrBuyProductList[a+5]+"</td><td>"+deepEtrBuyProductList[a+10]+"</td><td>"+deepEtrBuyProductList[a+15]+"</td></tr>";e("#deepEtrBuyProductTb").html(r);for(var i="",a=0;5>a;a++)i+="<tr><td>"+(a+1)+"</td><td>"+deepEtrSaleProductList[a]+"</td><td>"+deepEtrSaleProductList[a+5]+"</td><td>"+deepEtrSaleProductList[a+10]+"</td><td>"+deepEtrSaleProductList[a+15]+"</td></tr>";e("#deepEtrSaleProductTb").html(i)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findDeepEtrIndustryProduct:function(){e.ajax({url:basePath+"etrCreditReport/findDeepEtrIndustryProduct?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){deepEtrIndustryProductList=t.deepEtrIndustryProductList;for(var r="",a=0;5>a;a++)r+="<tr><td>"+(a+1)+"</td><td>"+deepEtrIndustryProductList[a]+"</td><td>"+deepEtrIndustryProductList[a+5]+"</td><td>"+deepEtrIndustryProductList[a+10]+"</td><td>"+deepEtrIndustryProductList[a+15]+"</td></tr>";e("#deepEtrIndustryProductTb").html(r)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findDeepEtrProfit:function(){e.ajax({url:basePath+"etrCreditReport/findDeepEtrProfit?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){deepEtrProfitList=t.deepEtrProfitList;var r="";r+="<tr><td>毛利率分档</td><td>"+deepEtrProfitList[0]+"</td><td>"+deepEtrProfitList[1]+"</td><td>"+deepEtrProfitList[2]+"</td><td>"+deepEtrProfitList[3]+"</td></tr>",e("#deepEtrProfitTb").html(r)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})},findEtrTrialJudgement:function(){e.ajax({url:basePath+"etrCreditReport/findEtrTrialJudgement?"+(new Date).getTime(),type:"post",dataType:"json",data:{otherEtrId:e("#otherEtrId").val()},async:!1,success:function(t){etrTrialList=t.etrTrialList,etrJudgementList=t.etrJudgementList;var r="";if(0==etrTrialList.length)r+="<tr><td colspan='8'>无</td> </tr>";else for(var a in etrTrialList)r+="<tr><td>"+etrTrialList[a].prosecutor+"</td><td>"+etrTrialList[a].enterpriseName+"</td><td>"+etrTrialList[a].thirdParty+"</td><td>"+etrTrialList[a].court+"</td><td>"+etrTrialList[a].caseNo+"</td><td>"+etrTrialList[a].trialAmount+"</td><td>"+etrTrialList[a].amount+"</td><td>"+etrTrialList[a].createTime+"</td></tr>";e("#etrTrialTb").html(r);var i="";if(0==etrJudgementList.length)i+="<tr><td colspan='6'>无</td> </tr>";else for(var a in etrJudgementList)i+="<tr><td>"+etrJudgementList[a].court+"</td><td>"+etrJudgementList[a].caseNo+"</td><td>"+etrJudgementList[a].amount+"</td><td>"+etrJudgementList[a].payment+"</td><td>"+etrJudgementList[a].caseStatus+"</td><td>"+etrJudgementList[a].createTime+"</td></tr>";e("#etrJudgementTb").html(i)},error:function(t){e.jBox.error("与服务器通信失败！请稍后重试","提示信息"),checkResult=!1}})}}}(jQuery),jQuery(document).ready(function(t){creditReport.findEtrRelationship(),creditReport.findEtrCapital(),creditReport.findEtrSaleBuy(),creditReport.findEtrSaleBuyTradingPartners(),creditReport.findDeepEtrBusCir(),creditReport.findDeepEtrCustomerSupplier(),creditReport.findDeepEtrSaleBuyProduct(),creditReport.findDeepEtrIndustryProduct(),creditReport.findDeepEtrProfit(),creditReport.findEtrTrialJudgement()});